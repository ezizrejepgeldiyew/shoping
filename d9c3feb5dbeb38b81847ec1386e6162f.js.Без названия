(function(){/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
'use strict';var aa=this||self;function k(a,b){a=a.split(".");var c=aa;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b};var l={},m=null;
function n(a){var b;void 0===b&&(b=0);if(!m){m={};for(var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),d=["+/=","+/","-_=","-_.","-_"],e=0;5>e;e++){var f=c.concat(d[e].split(""));l[e]=f;for(var g=0;g<f.length;g++){var h=f[g];void 0===m[h]&&(m[h]=g)}}}b=l[b];c=Array(Math.floor(a.length/3));d=b[64]||"";for(e=f=0;f<a.length-2;f+=3){var x=a[f],y=a[f+1];h=a[f+2];g=b[x>>2];x=b[(x&3)<<4|y>>4];y=b[(y&15)<<2|h>>6];h=b[h&63];c[e++]=g+x+y+h}g=0;h=d;switch(a.length-f){case 2:g=
a[f+1],h=b[(g&15)<<2]||d;case 1:a=a[f],c[e]=b[a>>2]+b[(a&3)<<4|g>>4]+h+d}return c.join("")};var p="undefined"!==typeof Uint8Array,q={};let r;var t=class{constructor(a){if(q!==q)throw Error("illegal external caller");this.B=a;if(null!=a&&0===a.length)throw Error("ByteString should be constructed with non-empty values");}};const u=Symbol(void 0);function v(a,b){Object.isFrozen(a)||(u?a[u]|=b:void 0!==a.l?a.l|=b:Object.defineProperties(a,{l:{value:b,configurable:!0,writable:!0,enumerable:!1}}))}function w(a,b){Object.isExtensible(a)&&(u?a[u]&&(a[u]&=~b):void 0!==a.l&&(a.l&=~b))}function z(a){let b;u?b=a[u]:b=a.l;return null==b?0:b}function A(a){v(a,1);return a}function B(a){return a?!!(z(a)&2):!1}function C(a){if(!Array.isArray(a))throw Error("cannot mark non-array as shared mutably");w(a,16)};var D={};function E(a){return null!==a&&"object"===typeof a&&!Array.isArray(a)&&a.constructor===Object}var F=Object.freeze(A([]));function G(a){if(B(a.i))throw Error("Cannot mutate an immutable Message");}function H(a){return{value:a,configurable:!1,writable:!1,enumerable:!1}};function ba(a){switch(typeof a){case "number":return isFinite(a)?a:String(a);case "object":if(a&&!Array.isArray(a)){if(p&&null!=a&&a instanceof Uint8Array)return n(a);if(a instanceof t){var b=a.B;b=null==b||"string"===typeof b?b:p&&b instanceof Uint8Array?n(b):null;return null==b?"":a.B=b}}}return a};function I(a,b,c){if(null!=a){if(Array.isArray(a))a=J(a,b,c);else if(E(a)){const d={};for(let e in a)d[e]=I(a[e],b,c);a=d}else a=b(a);return a}}function J(a,b,c){const d=Array.prototype.slice.call(a);c(a,d);for(a=0;a<d.length;a++)d[a]=I(d[a],b,c);return d}function K(a){if(a.v===D)return a.toJSON();a=ba(a);return Array.isArray(a)?J(a,K,L):a}function L(){};function M(a){return a.g||(a.g=a.i[a.j+a.h]={})}function N(a,b,c=!1){return-1===b?null:b>=a.j?a.g?a.g[b]:void 0:c&&a.g&&(c=a.g[b],null!=c)?c:a.i[b+a.h]}function O(a,b,c,d=!1,e=!1){e||G(a);a.s&&(a.s=void 0);b>=a.j||d?M(a)[b]=c:(void 0!==a.g&&a.j>=a.i.length?(d=a.i.length-1,e=b+a.h,e>=d?(a.i[d]=void 0,a.i[e]=c,a.i.push(a.g)):a.i[e]=c):a.i[b+a.h]=c,void 0!==a.g&&b in a.g&&delete a.g[b])}function P(a,b){a=N(a,b);return null==a?a:!!a}function ca(a){a=N(a,3);return null==a?0:a}
function da(a){a=P(a,1);return null==a?!1:a}function Q(a,b,c,d){G(a);c!==d?O(a,b,c):O(a,b,void 0,!1)}function R(a,b,c){const d=N(a,c,!1);{let f=!1;var e=null==d||"object"!==typeof d||(f=Array.isArray(d))||d.v!==D?f?new b(d):void 0:d}e!==d&&null!=e&&(O(a,c,e,!1,!0),v(e.i,z(a.i)&-33));b=e;if(null==b)return b;B(b.i)&&!B(a.i)&&(b=b.A(),O(a,c,b,!1));return b};function S(a,b){if(null==b||""==b)return new a;b=JSON.parse(b);if(!Array.isArray(b))throw Error(void 0);v(b,16);T=b;a=new a(b);T=null;return a}
var U=class{constructor(a,b,c){a||(a=T);T=null;var d=this.constructor.g||0,e=0<d,f=this.constructor.h;a?z(a)&16&&v(a,32):(a=f?[f]:[],v(a,48));e&&0<a.length&&E(a[a.length-1])&&"g"in a[a.length-1]&&(d=0);this.h=(f?0:-1)-d;this.m=void 0;this.i=a;a:{f=this.i.length;d=f-1;if(f&&(f=this.i[d],E(f))){this.g=f;b=Object.keys(f);0<b.length&&Array.prototype.every.call(b,isNaN,void 0)?this.j=Number.MAX_VALUE:this.j=d-this.h;break a}void 0!==b&&-1<b?(this.j=Math.max(b,d+1-this.h),this.g=void 0):this.j=Number.MAX_VALUE}if(!e&&
this.g&&"g"in this.g)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(c)for(e=0;e<c.length;e++)b=c[e],b<this.j?(b+=this.h,(d=this.i[b])?Array.isArray(d)&&A(d):this.i[b]=F):(d=M(this),(f=d[b])?Array.isArray(f)&&A(f):d[b]=F)}toJSON(){return J(this.i,K,L)}};U.prototype.v=D;U.prototype.toString=function(){return this.i.toString()};let T;function V(a,b,c,d,e,f){if(a=a.m&&a.m[c]){d=f.o?A(a.slice()):a;G(b);if(null!=d){e=A([]);f=!1;for(a=0;a<d.length;a++)e[a]=d[a].i,f=f||B(e[a]);b.m||(b.m={});b.m[c]=d;d=e;f?w(d,8):v(d,8)}else b.m&&(b.m[c]=void 0),e=F;O(b,c,e)}else p&&d instanceof Uint8Array?e=d.length?new t(new Uint8Array(d)):r||(r=new t(null)):(Array.isArray(d)&&(e?v(d,2):d&&z(d)&1&&f.o?(e=f=Array.prototype.slice.call(d),d=(z(d)|0)&-51,u?e[u]=d:void 0!==e.l?e.l=d:Object.defineProperties(e,{l:{value:d,configurable:!0,writable:!0,enumerable:!1}}),
d=f):C(d)),e=d),O(b,c,e)};var ea=class extends U{A(){return this}};Object.defineProperties(ea,{[Symbol.hasInstance]:H(()=>{throw Error(void 0);})});class W extends ea{A(){if(B(this.i)){var {o:a}={o:!0};a={o:a};const c=B(this.i);if(c&&!a.o)throw Error("copyRepeatedFields must be true for frozen messages");c||C(this.i);const d=new this.constructor;this.u&&(d.u=this.u.slice());const e=this.i;for(let f=0;f<e.length;f++){const g=e[f];if(f===e.length-1&&E(g))for(b in g){const h=+b;Number.isNaN(h)?M(d)[b]=g[b]:V(this,d,h,g[b],c,a)}else V(this,d,f-this.h,g,c,a)}var b=d;b.s=this}else b=this;return b}}Object.defineProperties(W,{[Symbol.hasInstance]:H(Object[Symbol.hasInstance])});var ha=class extends W{constructor(a){super(a,-1,fa)}},fa=[8];var ja=class extends W{constructor(a){super(a,-1,ia)}},ia=[17];var la=class extends W{constructor(a){super(a,-1,ka)}},ka=[27];var ma=class extends W{constructor(a){super(a)}};var oa=class extends W{constructor(a){super(a,-1,na)}},na=[1,2,3,6];var qa=class extends W{constructor(){super(void 0,-1,pa)}},pa=[12];/*

 SPDX-License-Identifier: Apache-2.0
*/
function X(a,b){a=a.getElementsByTagName("META");for(let c=0;c<a.length;++c)if(a[c].getAttribute("name")===b)return a[c].getAttribute("content")||"";return""};function ra(a){if(!(0<a.g.length)){var b=X(a.body,"environment");for(const c of b.split("|"))c&&a.g.push(c)}}function Y(a,b){a=a.body;var c={detail:void 0};let d;"function"===typeof window.CustomEvent?d=new CustomEvent(b,c):(d=document.createEvent("CustomEvent"),d.initCustomEvent(b,!!c.bubbles,!!c.cancelable,c.detail));a.dispatchEvent(d)}
var sa=class{constructor(a){this.body=a;this.g=[];this.h={};X(a,"sampling_mod");var b=X(a,"namespace");if(!b){b="ns-"+(0,Math.random)().toString(36).substr(2,5);a:{var c=a.getElementsByTagName("META");for(let d=0;d<c.length;++d)if("namespace"===c[d].getAttribute("name")&&c[d].getAttribute("index")===(0).toString()){c[d].setAttribute("content",b);break a}c=a.querySelector("#mys-meta");c||(c=document.createElement("div"),c.id="mys-meta",c.style.position="absolute",c.style.display="none",a.appendChild(c));
a=document.createElement("META");a.setAttribute("name","namespace");a.setAttribute("content",b);a.setAttribute("index",(0).toString());c.appendChild(a)}}ra(this);!this.h.hasOwnProperty("META_LOCKED")&&(a=X(this.body,"custom_flags"))&&(this.h=JSON.parse(a))}addEventListener(a,b){this.body.addEventListener(a,b)}};var ta=class extends W{constructor(){super(void 0)}};function ua(a){var b=document;a=String(a);"application/xhtml+xml"===b.contentType&&(a=a.toLowerCase());return b.createElement(a)};function va(a){if(1>=a.h.offsetWidth||1>=a.h.offsetHeight)return!1;a.g.remove();Y(a.context,"spanReady");return!0}
var wa=class{constructor(a,b){this.context=a;this.j=b;this.h=ua("SPAN");this.g=ua("DIV");this.h.style.fontSize="6px";this.h.textContent="go";this.g.style.position="absolute";this.g.style.top="100%";this.g.style.left="100%";this.g.style.width="1px";this.g.style.height="0";this.g.style.overflow="hidden";this.g.style.visibility="hidden";this.g.appendChild(this.h)}wait(){if(!da(this.j)&&(Y(this.context,"spanStart"),this.context.body.appendChild(this.g),!va(this)))return new Promise(a=>{const b=setInterval(()=>
{va(this)&&(clearInterval(b),a())},ca(this.j))})}};var xa=class{constructor(a,b){this.context=a;this.h=R(b,la,1);this.g=R(b,ha,12)||new ha;R(this.h,ja,10)||new ja}};var ya=class{constructor(){this.channel=3;(this.g=!(!window.mys||!window.mys.pingback))&&this.setData(43,Date.now()-window.mys.pingback.getBaseTime())}setAttribute(a,b){this.g&&window.mys.pingback.setAttribute(a,b)}setData(a,b){this.g&&window.mys.pingback.setData(a,b,this.channel)}send(a){this.g&&window.mys.pingback.send(a)}};function za(a){a.g&=-31}function Z(a,b){a.g|=b}var Aa=class{constructor(a,b){this.context=a;this.m=b;new qa;this.g=0;this.pingback=new ya}h(){}};function Ba(a){S(oa,X(a.context.body,"engine_msg")||"[]");return a.g.h()||Promise.resolve()}
var Ca=class{constructor(a,b,c,d){this.g=d(a,b,c);this.context=this.g.context}init(){za(this.g);Z(this.g,1);let a;null==(a=window.AFMA_Communicator)||a.addEventListener("onshow",()=>{Z(this.g,32)});let b=0;const c=this.context.body;c.addEventListener("browserRender",()=>{++b;if(1===b)Y(this.context,"overallStart"),Ba(this).then(()=>{Y(this.context,"overallQuiet")});else{var d=c.clientHeight;c.clientWidth&&d&&Ba(this)}})}};function Da(a){a.j.length=0;a.h=!0}function Ea(a,b){a.g=!0;const c=()=>{a.h=!1;const d=a.j.shift();return void 0===d?(a.g=!1,Promise.resolve()):Ea(a,d())};return b?b.then(c,()=>{if(a.h)return c();a.g=!1;return Promise.reject()}):c()}function Fa(a,b){for(const c of b)a.j.push(c);if(!a.g)return Ea(a)}var Ga=class{constructor(){this.h=this.g=!1;this.j=[]}};var Ha=class extends Aa{constructor(){super(...arguments);this.j=new Ga}h(){Da(this.j);return Fa(this.j,[()=>{},()=>{let a;var b=this.m;const c=new ta;Q(c,3,100,0);Q(c,4,1E4,0);P(b.g,3)&&Q(c,2,!0,!1);b=b.context;ra(b);0<=b.g.indexOf("amp")&&Q(c,2,!0,!1);c&&(a=(new wa(this.context,c)).wait());Y(this.context,"browserStart");Y(this.context,"browserStartEnd");za(this);Z(this,2);return a},()=>{Y(this.context,"browserReady");Y(this.context,"browserReadyEnd");Z(this,4);Y(this.context,"overallReady")},()=>
{Y(this.context,"browserQuiet");Y(this.context,"browserQuietEnd");Z(this,8)}])}};(function(a){let b=null;k("mys.engine.init",(c,d)=>{const e=S(ma,X(d,"render_config")||"[]");b=new Ca(c,d,e,a);b.init()});k("mys.engine.stage",()=>b?b.g.g:0)})(function(a,b,c){a=new sa(b);c=new xa(a,c);return new Ha(a,c)});}).call(this);
